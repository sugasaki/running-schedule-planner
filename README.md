# ランニングスケジュールプランナー

ランニングイベントのチェックポイント管理と時間計算を行うWebアプリケーションです。プリセット設定機能により、様々なランニングイベントに対応できます。

## 機能

### 📍 チェックポイント管理
- チェックポイントの追加・編集・削除
- ドラッグ&ドロップによる順序変更
- 場所名、区分（集合、スタート、ゴール等）の設定
- Handsontableによる高性能なスプレッドシート操作

### ⏱️ 時間計算
- スタート日時の設定
- 各チェックポイントの到着・出発時刻を自動計算
- 距離とペースに基づく移動時間算出
- 休憩時間の考慮
- 月/日 時:分 形式での時刻表示

### 🎛️ プリセット管理システム
- **サンプルプリセット**: 外部JSONファイルから読み込み
  - 街ラン（東京名所巡り120kmコース）
  - マラソントレーニング（16週間プログラム）
  - 10Kトレーニングプラン
- **カスタムプリセット**: ユーザー独自の設定保存
- **設定の保存・読み込み**: JSON形式でのエクスポート・インポート
- **カテゴリ別整理**: street-run, marathon, training, custom

### 📊 データ管理
- 距離、ペース、間隔、休憩時間の個別設定
- エラーチェック（前のチェックポイントより距離が小さい場合）
- 総距離と推定総時間の表示
- LocalStorageによるカスタム設定の永続化

### � ユーザーインターフェース
- モダンで直感的なUI/UX
- 設定パネルの表示/非表示切り替え
- レスポンシブデザイン
- アクセシブルなコンポーネント設計

## 技術スタック

- **フロントエンド**: React 18 + TypeScript
- **ビルドツール**: Vite
- **スタイリング**: Tailwind CSS + PostCSS
- **テーブル**: Handsontable Community Edition
- **ドラッグ&ドロップ**: @dnd-kit/core, @dnd-kit/sortable
- **アイコン**: Lucide React
- **パッケージマネージャー**: pnpm

## アーキテクチャ

### コンポーネント構成
```
src/
├── components/
│   ├── ConfigSelector.tsx         # プリセット選択・管理UI
│   ├── HandsontableSchedule.tsx   # メインテーブル（Handsontable）
│   ├── ScheduleTable.tsx          # レガシーテーブル（DnD対応）
│   ├── SortableRow.tsx            # ドラッグ可能な行
│   └── DraggableColumn.tsx        # ドラッグ可能な列ヘッダー
├── services/
│   └── ConfigManager.ts           # プリセット管理クラス
├── hooks/
│   └── useTimeCalculations.ts     # 時間計算カスタムフック
├── utils/
│   └── timeUtils.ts               # 時間フォーマット関数
├── types/
│   └── config.ts                  # プリセット型定義
├── types.ts                       # メイン型定義
└── RunningSchedulePlanner.tsx     # メインコンポーネント
```

### プリセット管理システム
```
public/presets/
├── presets-index.json             # プリセット一覧管理
├── README.md                      # プリセット構造説明
├── street-run/                    # 街ランカテゴリ
│   └── tokyo-street-run-2025.json
├── marathon/                      # マラソンカテゴリ
│   └── marathon-training-16weeks.json
└── training/                      # トレーニングカテゴリ
    └── 10k-training.json
```

### 設計思想
- **プリセット駆動設計**: 外部JSONファイルによる設定管理
- **非同期アーキテクチャ**: Promise/async-awaitベースの設定読み込み
- **コンポーネント分割**: 機能ごとに独立したコンポーネント
- **型安全性**: TypeScriptによる厳密な型チェック
- **パフォーマンス**: 並列読み込みと効率的な状態管理
- **拡張性**: モジュラー設計による新機能追加の容易さ
- **保守性**: 責任の明確な分離と外部設定管理

## セットアップ

### 前提条件
- Node.js (推奨: v18以上)
- pnpm (推奨) または npm

### インストール
```bash
# リポジトリのクローン
git clone https://github.com/your-username/running-schedule-planner.git
cd running-schedule-planner

# 依存関係のインストール
pnpm install
# または
npm install
```

### 開発サーバーの起動
```bash
pnpm dev
# または
npm run dev
```

### ビルド
```bash
pnpm build
# または
npm run build
```

### プレビュー
```bash
pnpm preview
# または
npm run preview
```

## 使い方

### 基本操作
1. **プリセットの選択**: 画面右上の設定アイコンから既存プリセットを選択
2. **スタート日時の設定**: 画面上部でイベントの開始日時を設定
3. **チェックポイントの編集**: テーブル内で各項目を直接編集
4. **行の操作**: 右クリックメニューで行の追加・削除
5. **列の調整**: 列ヘッダーをドラッグして列順序変更、境界で列幅調整

### プリセット管理
- **既存プリセット**: サンプルプリセットから選択
- **カスタム保存**: 現在の設定を新しいプリセットとして保存
- **設定削除**: 不要なカスタムプリセットを削除
- **インポート**: JSON形式の設定ファイルを読み込み
- **エクスポート**: 現在の設定をJSON形式でダウンロード

### 入力項目
- **場所**: チェックポイントの名称
- **区分**: 集合、スタート、ゴール等の種別
- **距離**: 累積距離（km）
- **ペース**: 移動ペース（分/km）
- **間隔**: 前のチェックポイントからの距離（自動計算）
- **休憩**: 休憩時間（分）

### 新しいプリセットの追加（開発者向け）
1. `public/presets/` の適切なカテゴリフォルダにJSONファイルを作成
2. `public/presets/presets-index.json` に新しいファイルパスを追加
3. アプリケーションが自動的に新しいプリセットを認識

## 開発

### 開発サーバーの起動
```bash
pnpm dev
# ブラウザで http://localhost:5173 にアクセス
```

### ビルド
```bash
pnpm build
# dist/ フォルダに本番用ファイルが生成されます
```

### プレビュー
```bash
pnpm preview
# ビルド結果をローカルでプレビュー
```

### コード品質
```bash
# ESLintチェック
pnpm lint

# 型チェック
pnpm type-check
```

## プリセット例

### 東京街ラン 2025
- **距離**: 120km
- **チェックポイント**: 28箇所
- **特徴**: 東京の名所を巡る長距離街ランコース
- **所要時間**: 約20時間

### マラソントレーニング
- **距離**: 21.1km
- **チェックポイント**: 7箇所
- **特徴**: 初心者向けマラソン完走トレーニング
- **所要時間**: 約2.5時間

### 10Kトレーニング
- **距離**: 10km
- **チェックポイント**: 6箇所
- **特徴**: 10K完走を目指すトレーニングプラン
- **所要時間**: 約1時間

## ライセンス

MIT License

## 貢献

プルリクエストやイシューは歓迎します。大きな変更を行う前に、まずイシューを作成して議論することをお勧めします。

### 開発ガイドライン
- TypeScriptの型安全性を維持してください
- コンポーネントは機能ごとに分割してください
- 新しいプリセットはJSON形式で作成してください
- テストを書くことを推奨します

## 作者

Created with [Claude](https://claude.ai/) and React + TypeScript